define("ball",[],function(){var e=function(){this.renderer=null,this.stage=null,this.container=null,this.spriteTex=null,this.divCounter=null,this.sprites=[],this.incremental=50,this.isAdding=!1,this.canWidth=0,this.canHeight=0};return e.prototype={init:function(e,t){console.log("BallMgr::init()"),this.renderer=e,this.stage=t,this.divCounter=document.createElement("div"),this.divCounter.className="counter",document.body.appendChild(this.divCounter),this.container=new PIXI.SpriteBatch,this.stage.addChild(this.container),this.spriteTex=new PIXI.Texture.fromImage("ball32.png");for(var i=0;2>i;i++){var n=this.createSprite();this.sprites.push(n),this.container.addChild(n)}},onResize:function(e,t){if(this.canWidth=e,this.canHeight=t,this.renderer){var i=this.renderer.view.offsetLeft,n=this.renderer.view.offsetTop;this.divCounter.style.left=i+"px",this.divCounter.style.top=n+50+"px",this.updateCounter()}},onUpdate:function(){if(this.isAdding){for(var e=0;e<this.incremental;e++){var t=this.createSprite();this.sprites.push(t),this.container.addChild(t)}this.updateCounter()}for(var e=0,i=this.sprites.length;i>e;e++){var t=this.sprites[e];t.position.x+=t.speedX,t.position.y+=t.speedY,t.speedY+=.75,t.rotation+=.1,t.position.x>this.canWidth?(t.speedX*=-1,t.position.x=this.canWidth):t.position.x<0&&(t.speedX*=-1,t.position.x=0),t.position.y>this.canHeight?(t.speedY*=-.85,t.position.y=this.canHeight,t.spin=.2*(Math.random()-.5),Math.random()>.5&&(t.speedY-=6*Math.random())):t.position.y<0&&(t.speedY=0,t.position.y=0)}},updateCounter:function(){this.divCounter.innerHTML=this.sprites.length+" sprites"},onMouseDown:function(){this.isAdding=!0},onMouseUp:function(){this.isAdding=!1},createSprite:function(){var e=new PIXI.Sprite(this.spriteTex);return e.speedX=10*Math.random(),e.speedY=10*Math.random()-5,e.anchor.x=.5,e.anchor.y=.5,e}},{createMgr:function(){return new e}}}),requirejs.config({baseUrl:".",paths:{lib:"lib"}}),requirejs(["ball"],function(e){var t=800,i=600,n=new PIXI.autoDetectRenderer(t,i);n instanceof PIXI.WebGLRenderer?console.log("PIXI is using WebGL as renderer engine"):(console.log("PIXI is using Canvas 2D as Renderer engine"),n.context.mozImageSmoothingEnabled=!1,n.context.webkitImageSmoothingEnabled=!1);var o=new PIXI.Stage(16777215);document.body.appendChild(n.view),n.view.style.position="absolute";var s=new Stats;document.body.appendChild(s.domElement),s.domElement.style.position="absolute",s.domElement.style.top="0px";var r=e.createMgr();r.init(n,o),$(n.view).mousedown(function(e){r.onMouseDown(e)}),$(n.view).mouseup(function(e){r.onMouseUp(e)}),document.addEventListener("touchstart",function(){console.log("touchstart")},!0),document.addEventListener("touchend",function(){console.log("touchend")},!0);var d=function(){s.begin(),r.onUpdate(),n.render(o),requestAnimFrame(d),s.end()},a=function(){var e=$(window).width(),t=$(window).height();e>800&&(e=800),t>600&&(t=600);var i=($(window).width()-e)/2,o=($(window).height()-t)/2;n.view.style.left=i+"px",n.view.style.top=o+"px",n.view.style.width=e+"px",n.view.style.height=t+"px",n.resize(e,t),s.domElement.style.left=i+"px",s.domElement.style.top=o+"px",r.onResize(e,t)};$(window).resize(a),a(),d()}),define("main",function(){});